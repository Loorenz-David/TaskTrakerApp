{% extends 'Base.html' %}



{% block stylesheet %}


{% endblock %}

{% block content %}

<main >
    <div class="full-page ">
        <div class="closeItem padding-bottom-3" id="closePageBtn">
            <div class="bar"></div>
            <div class="bar"></div>
        </div>

        <div class="flex-row  padding-2">
            <span class="header-10" id="item_article_number"></span>
        </div>
        <div class="flex-row space-around padding-2">
            <div class="flex-column gap-3 ">
                <div class="flex-column justify-center gap-05">
                    <span class=" subheader-1 text-dark-grey">Type</span>
                    <span class=" text text-dark-grey" id="item_type"></span>
                </div>
                <div class="flex-column justify-center gap-05">
                    <span class=" subheader-1 text-dark-grey">Condition</span>
                    <span class=" text text-dark-grey"  id="item_condition"></span>
                </div>
            </div>
            <div class="flex-column gap-3">
                <div class="flex-column gap-05">
                    <span class=" subheader-1 text-dark-grey">Quantity</span>
                    <span class=" text text-dark-grey" id="item_quantity"></span>
                </div>
                <div class="flex-column gap-05">
                    <span class=" subheader-1 text-dark-grey">Upholstery</span>
                    <span class=" text text-dark-grey" id="item_upholstery"></span>
                </div>
            </div>
            
        </div>
        <div class="flex-column  gap-2 padding-2 flex-1 tasks-container margin-top-2" id="tasksPageContainer">
            
        </div>
        <div class="flex-column gap-1 padding-2">
            <div class="flex-row justify-start">
                <span class="subheader-1 text-dark-grey">Notes:</span>
            </div>
            <div class="flex-row">
                <textarea id="user_notes"></textarea>
            </div>
        </div>
        
        <div class="flex-row footer-page">
            <div class="btn bg-green padding-2" id="startBtn">
                <span style="color: white;">Start</span>
            </div>
            <div class="btn bg-grey padding-2" style="display: none;" id="finishBtn">
                <span style="color: white;">Finish</span>
            </div>
        </div>
    </div>
    <div class="flex-row filter-container">
        <input id="articleNumberInput" type="text" style="font-size: 20px !important;">
    </div>
    
    <div class="flex-column flex-1 itemList" style="overflow-x: hidden; overflow-y: auto;" id="containerItemsList">
        
    </div>
    


    
</main>

<!-- templates ------------------------- -->

<template id="trolleyContainer">
    <div class="flex-row" data-value="containerTrolley">
        <div class="flex-column flex-1" data-value="trolleyItemList">
            <div class="flex-row padding-2 justify-start">
                <span data-value="trolley" class="header-10 text-grey"></span>
            </div>
            <div class="flex-row">
                <div class="flex-column flex-1" data-value="trolleyItemsList">

                </div>
            </div>
            
        </div>
    </div>
</template>
<template id="itemElement">  
        <div class="flex-row itemElement">
            <span data-value="article_number"></span>
        </div> 
</template> 
<template id="taskListTemplate">
    <div class="flex-row items-center gap-1 justify-start  task-element">
        <label class="custom-checkbox">
            <input type="checkbox" >
            <span class="checkmark"></span>
        </label>
        <span data-value="item_task" class="text-17 text-dark-grey"></span>
    </div>
</template>


{% endblock %}

{% block js %}

<script>
    const userSections = {{ user_sections | tojson}}
    const userRole = "{{ user_role | safe }}"
    const ulSections = document.getElementById('ulSections')
    let addItemBtn = document.getElementById('addItemBtn')
    
    userSections.forEach((section)=>{ 
        let liSection = document.createElement('li')
        let span = document.createElement('span')

        liSection.appendChild(span)

        span.textContent = section

        ulSections.appendChild(liSection)
        

    })
    
    if(userRole == 'admin'){
        
        addItemBtn.style.display = 'flex'

    }
    else{
        addItemBtn.style.display = 'none'
    }
</script>

<script src="{{url_for('static' , filename='js/request_handler.js')}}"></script>
<script src="{{url_for('static', filename='js/handle_section_selection.js')}}"></script>


{% endblock %}